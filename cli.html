<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CLI Operations &mdash; cas-tools 1.0.7 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=46dfa7f5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="cas-tools’s documentation!" href="source/index.html" />
    <link rel="prev" title="CAS Tools" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            cas-tools
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">CAS Tools</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CLI Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#validate-cas-file">Validate CAS file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#flatten-onto-anndata">Flatten onto AnnData</a></li>
<li class="toctree-l2"><a class="reference internal" href="#unflatten-operation">Unflatten Operation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#usage-example">Usage Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#convert-spreadsheet-to-cas">Convert spreadsheet to CAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#convert-anndata-to-cas">Convert AnnData to CAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#convert-abc-to-cas">Convert ABC to CAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#convert-cas-to-abc">Convert CAS to ABC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#merge-cas-to-anndata-file">Merge CAS to AnnData file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#populate-cell-ids">Populate Cell IDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#convert-cas-data-to-rdf">Convert CAS data to RDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-author-annotations-to-cas-json">Add Author Annotations to CAS JSON</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#command-line-arguments">Command-line Arguments:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage-examples">Usage Examples:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#split-cas-json-by-cell-label">Split CAS JSON by Cell Label</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Command-line Arguments:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Usage Examples:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#split-anndata-with-cas-json">Split AnnData with CAS JSON</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Command-line Arguments:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Usage Examples:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="source/index.html">cas-tools’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/index.html#indices-and-tables">Indices and tables</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cas-tools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">CLI Operations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cli.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cli-operations">
<h1>CLI Operations<a class="headerlink" href="#cli-operations" title="Link to this heading"></a></h1>
<p>Following operations are supported by the CAS commandline interface.</p>
<section id="validate-cas-file">
<h2>Validate CAS file<a class="headerlink" href="#validate-cas-file" title="Link to this heading"></a></h2>
<p>Checks if the provided CAS data files comply with the specified CAS schema. In case of invalid files, the system logs the issues and throws an exception.</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cas validate --schema bican --data path/to/file
</pre></div>
</div>
<p><strong>Command-line Arguments:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--schema</span></code>    : One of ‘base’, ‘bican’ or ‘cap’. Identifies the CAS schema to validate data against.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--data</span></code>   : Path to the data file (or folder) to validate. If given path is a folder, validates all json files inside.</p></li>
</ul>
</section>
<section id="flatten-onto-anndata">
<h2>Flatten onto AnnData<a class="headerlink" href="#flatten-onto-anndata" title="Link to this heading"></a></h2>
<p>Flattens all content of CAS annotations to <code class="docutils literal notranslate"><span class="pre">obs</span></code> key:value pairs. Flattens all other content to key_value pairs in <code class="docutils literal notranslate"><span class="pre">uns</span></code>. The resulting AnnData object is then saved to a new file.</p>
<p>Key Features:</p>
<ol class="arabic simple">
<li><p>Parses command-line arguments for input JSON file, input AnnData file, and output file.</p></li>
<li><p>Reads and processes the input JSON file and AnnData file.</p></li>
<li><p>Updates the AnnData object with information from the JSON annotations and root keys.</p></li>
<li><p>Writes the modified AnnData object to a specified output file.</p></li>
</ol>
<p>Detailed specification about the <code class="docutils literal notranslate"><span class="pre">flatten</span></code> operation can be found in the <a class="reference external" href="https://github.com/cellannotation/cas-tools/issues/7">related issue</a>.</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cas flatten --json path/to/json_file.json --anndata path/to/anndata_file.h5ad --output path/to/output_file.h5ad
</pre></div>
</div>
<p><strong>Command-line Arguments:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--json</span></code>      : Path to the CAS JSON schema file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--anndata</span></code>   : Path to the AnnData file. Ideally, the location will be specified by a resolvable path in the CAS file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output</span></code>    : Optional output AnnData file name. If provided a new flatten anndata file will be created,
otherwise the inputted anndata file will be updated with the flatten data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--fill-na</span></code>   : Optional boolean flag indicating whether to fill missing values in the ‘obs’ field with pd.NA. If
provided, missing values will be replaced with pd.NA; if not provided, they will remain as empty
strings.</p></li>
</ul>
<p>Please check the <a class="reference download internal" download="" href="_downloads/9a7802a317dc249a85b975d1951e636e/test_flatten.ipynb"><span class="xref download myst">related notebook</span></a> to evaluate the output data format.</p>
</section>
<section id="unflatten-operation">
<h2>Unflatten Operation<a class="headerlink" href="#unflatten-operation" title="Link to this heading"></a></h2>
<p>Unflattens all content of a flattened AnnData file into a CAS JSON file and creates an unflattened AnnData file.</p>
<p><strong>Key Features:</strong></p>
<ol class="arabic simple">
<li><p>Parses command-line arguments for input AnnData file and optional JSON and output files.</p></li>
<li><p>Processes the input AnnData file and optionally a JSON file.</p></li>
<li><p>Converts flattened AnnData content back to its unflattened version and creates corresponding CAS JSON files.</p></li>
<li><p>Saves the unflattened AnnData and CAS JSON files to specified output locations.</p></li>
</ol>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cd src
python -m cas unflatten --anndata path/to/anndata_file.h5ad --json path/to/json_file.json --output_anndata path/to/output_file.h5ad --output_json path/to/output_cas.json
python -m cas unflatten --anndata path/to/anndata_file.h5ad
</pre></div>
</div>
<p><strong>Command-line Arguments:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--anndata</span></code>        : Path to the input AnnData file that contains flattened data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--json</span></code>           : Optional path to the CAS JSON file. If not provided, the ‘annotations’ in <code class="docutils literal notranslate"><span class="pre">uns</span></code> will be used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output_anndata</span></code> : Optional output AnnData file name. If not provided, <code class="docutils literal notranslate"><span class="pre">unflattened.h5ad</span></code> will be used as the default name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output_json</span></code>    : Optional output CAS JSON file name. If not provided, <code class="docutils literal notranslate"><span class="pre">cas.json</span></code> will be used as the default name.</p></li>
</ul>
<section id="usage-example">
<h3>Usage Example<a class="headerlink" href="#usage-example" title="Link to this heading"></a></h3>
<p>To execute the <code class="docutils literal notranslate"><span class="pre">unflatten</span></code> operation, use the following command:</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cd src
python -m cas unflatten --anndata path/to/anndata_file.h5ad --json path/to/json_file.json --output_anndata path/to/output_file.h5ad --output_json path/to/output_cas.json
</pre></div>
</div>
</section>
</section>
<section id="convert-spreadsheet-to-cas">
<h2>Convert spreadsheet to CAS<a class="headerlink" href="#convert-spreadsheet-to-cas" title="Link to this heading"></a></h2>
<p>Convert a spreadsheet to Cell Annotation Schema (CAS) JSON.</p>
<p>Detailed specification about the <code class="docutils literal notranslate"><span class="pre">spreadsheet2cas</span></code> operation can be found in the <a class="reference external" href="https://github.com/cellannotation/cell-annotation-schema/issues/25">related issue</a>.</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>spreadsheet2cas --spreadsheet  path/to/spreadsheet_file --sheet optional_sheet_name
</pre></div>
</div>
<p><strong>Command-line Arguments:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--spreadsheet</span></code> : Path to the spreadsheet file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--sheet</span></code> : Target sheet name in the spreadsheet.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--anndata</span></code> : Path to the AnnData file. If not provided, AnnData will be downloaded using CxG LINK in spreadsheet.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labelsets</span></code> : List of names of observation (obs) fields used to record author cell type names,
which determine the rank of labelsets in a spreadsheet. If not provided, ranks will be determined based on
the order of the fields specified in the CELL LABELSET NAME column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output</span></code> : Output CAS file name (default: output.json).</p></li>
</ul>
</section>
<section id="convert-anndata-to-cas">
<h2>Convert AnnData to CAS<a class="headerlink" href="#convert-anndata-to-cas" title="Link to this heading"></a></h2>
<p>Convert an AnnData file to Cell Annotation Schema (CAS) JSON.</p>
<p>Detailed specification about the <code class="docutils literal notranslate"><span class="pre">anndata2cas</span></code> operation can be found in the
<a class="reference external" href="https://github.com/cellannotation/cas-tools/issues/10">related issue</a>.</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cas anndata2cas --anndata path/to/anndata.h5ad --labelsets item1 item2 item3 --output path/to/output_file.json
</pre></div>
</div>
<p><strong>Command-line Arguments:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--anndata</span></code> : Path to the AnnData file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--labelsets</span></code> : List of labelsets, which are names of observation (obs) fields used to record author cell type
names. The labelsets should be provided in order, starting from rank 0 (leaf nodes) and ascending to higher ranks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output</span></code> : Output CAS file name (default: output.json).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--hierarchy</span></code>: Flag indicating whether to include hierarchy in the output.</p></li>
</ul>
</section>
<section id="convert-abc-to-cas">
<h2>Convert ABC to CAS<a class="headerlink" href="#convert-abc-to-cas" title="Link to this heading"></a></h2>
<p>Converts given ABC cluster_annotation files to Cell Annotation Schema (CAS) JSON.</p>
<p>Detailed specification about the <code class="docutils literal notranslate"><span class="pre">abc2cas</span></code> operation can be found in the
<a class="reference external" href="https://github.com/cellannotation/cas-tools/issues/22">related issue</a>.</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>python -m cas abc2cas --catset path/to/cluster_annotation_term_set.csv --cat path/to/cluster_annotation_term.csv 
--output path/to/output_file.json
</pre></div>
</div>
<p><strong>Command-line Arguments:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--catset</span></code> : Path to the Cluster Annotation Term Set file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cat</span></code> : Path to the Cluster Annotation Term file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output</span></code> : Output CAS file name (default: output.json).</p></li>
</ul>
</section>
<section id="convert-cas-to-abc">
<h2>Convert CAS to ABC<a class="headerlink" href="#convert-cas-to-abc" title="Link to this heading"></a></h2>
<p><strong>Status: Incomplete</strong></p>
<p>Converts given Cell Annotation Schema (CAS) to ABC files: cluster_annotation_term and cluster_annotation_term_set,
and writes them to files with cat_file_path and cat_set_file_path.</p>
<p>Detailed specification about the <code class="docutils literal notranslate"><span class="pre">cas2abc</span></code> operation can be found in the
<a class="reference external" href="https://github.com/cellannotation/cas-tools/issues/22">related issue</a>.</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>python -m cas cas2abc --json path/to/json_file.json --catset path/to/cluster_annotation_term_set.csv --cat 
path/to/cluster_annotation_term.csv
</pre></div>
</div>
<p><strong>Command-line Arguments:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--json</span></code> : Path to the CAS JSON schema file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--catset</span></code> : Path to the Cluster Annotation Term Set file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cat</span></code> : Path to the Cluster Annotation Term file.</p></li>
</ul>
</section>
<section id="merge-cas-to-anndata-file">
<h2>Merge CAS to AnnData file<a class="headerlink" href="#merge-cas-to-anndata-file" title="Link to this heading"></a></h2>
<p>Integrates cell annotations from a CAS (Cell Annotation Schema) JSON file into an AnnData object.  It performs validation checks to ensure data consistency between the CAS file and the AnnData file.  The AnnData file location should ideally be specified as a resolvable path in the CAS file.</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cas merge --json path/to/CAS_schema.json --anndata path/to/input_anndata.h5ad --validate --output path/to/output.h5ad
</pre></div>
</div>
<p><strong>Command-line Arguments:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--json</span></code>      : Path to the CAS JSON schema file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--anndata</span></code>   : Path to the AnnData file. Ideally, the location will be specified by a resolvable path in the CAS file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--validate</span></code>  : (Optional) Perform validation checks before writing to the output AnnData file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output</span></code>    : Output AnnData file name (default: output.h5ad).</p></li>
</ul>
<p>Please check the <a class="reference download internal" download="" href="_downloads/e2789f4adf73433dc098ff24a7f3550e/test_merge.ipynb"><span class="xref download myst">related notebook</span></a> to evaluate the output data format.</p>
</section>
<section id="populate-cell-ids">
<h2>Populate Cell IDs<a class="headerlink" href="#populate-cell-ids" title="Link to this heading"></a></h2>
<p>Add/update CellIDs to CAS from matching AnnData file. Checks for alignment between <code class="docutils literal notranslate"><span class="pre">obs</span></code> key:value pairs in AnnData file and labelset:cell_label pairs in CAS for some specified list of <code class="docutils literal notranslate"><span class="pre">labelsets</span></code>. If they are aligned, updates <code class="docutils literal notranslate"><span class="pre">cell_ids</span></code> in CAS.</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cas populate_cells --json path/to/json_file.json --anndata path/to/anndata_file.h5ad --labelsets Cluster,Supercluster
</pre></div>
</div>
<p><strong>Command-line Arguments:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--json</span></code>      : Path to the CAS JSON schema file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--anndata</span></code>   : Path to the AnnData file. Ideally, the location will be specified by a resolvable path in the CAS file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--labelsets</span></code> : (Optional) List of labelsets to update with IDs from AnnData. If value is not provided, rank ‘0’ labelset is used.</p></li>
</ul>
</section>
<section id="convert-cas-data-to-rdf">
<h2>Convert CAS data to RDF<a class="headerlink" href="#convert-cas-data-to-rdf" title="Link to this heading"></a></h2>
<p>Converts the given CAS data to RDF format.</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cas cas2rdf --schema bican --data path/to/file.json --ontology_ns MTG --ontology_iri https://purl.brain-bican.org/ontology/AIT_MTG/ --labelsets Cluster Subclass Class --out path/to/output.rdf --exclude_cells
</pre></div>
</div>
<p><strong>Command-line Arguments:</strong>
–schema    : (Optional) Name of the CAS release (such as one of <code class="docutils literal notranslate"><span class="pre">base</span></code>, <code class="docutils literal notranslate"><span class="pre">cap</span></code>, <code class="docutils literal notranslate"><span class="pre">bican</span></code>) or path to the
CAS schema file or url of the schema file. If not provided, reads the <code class="docutils literal notranslate"><span class="pre">base</span></code> CAS schema from the cas module.
–data   : Path to the json data file
–ontology_ns    : Ontology namespace (e.g. <code class="docutils literal notranslate"><span class="pre">MTG</span></code>)
–ontology_iri    : Ontology IRI (e.g. <code class="docutils literal notranslate"><span class="pre">https://purl.brain-bican.org/ontology/AIT_MTG/</span></code>)
–labelsets    : (Optional) Labelsets used in the taxonomy (such as <code class="docutils literal notranslate"><span class="pre">[&quot;Cluster&quot;,</span> <span class="pre">&quot;Subclass&quot;,</span> <span class="pre">&quot;Class&quot;]</span></code>).
–out    : The output RDF file path.
–skip_validate    : (Optional) Determines if data-schema validation checks will be performed. Validations are performed by default.
–exclude_cells    : (Optional) Determines if cell data will be included in the RDF output. Cell data is exported to RDF by default.</p>
</section>
<section id="add-author-annotations-to-cas-json">
<h2>Add Author Annotations to CAS JSON<a class="headerlink" href="#add-author-annotations-to-cas-json" title="Link to this heading"></a></h2>
<p>This tool processes input CSV and CAS JSON files to add annotation fields to the CAS JSON based on matching columns specified by the user. It can optionally use selected columns from the CSV for annotations and outputs the annotated CAS JSON to a specified file. If no specific columns are provided, all columns from the CSV file will be used.</p>
<section id="command-line-arguments">
<h3>Command-line Arguments:<a class="headerlink" href="#command-line-arguments" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>–cas_json</strong>: Path to the CAS JSON file that will be updated with annotations. This parameter is required.</p></li>
<li><p><strong>–csv</strong>: Specifies the path to the CSV file containing the data for annotation. This parameter is required.</p></li>
<li><p><strong>–join_on</strong>: Specifies the single column name in the CSV used for matching records. Each row must have a unique value in this column.</p></li>
<li><p><strong>–join_on_cell_set_id</strong>: Use ‘cell_set_id’ as the column for matching records. This option is triggered with a flag.</p></li>
<li><p><strong>–join_on_labelset_label</strong>: Use a pair of ‘labelset’, ‘cell_label’ columns for matching records. This option is triggered with a flag.</p></li>
<li><p><strong>–columns</strong>: Optionally specifies which columns in the CSV will be used for annotations. If not provided, all columns are used. Column names containing spaces must be enclosed in quotes (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;Column</span> <span class="pre">Name&quot;</span></code>).</p></li>
<li><p><strong>–output</strong>: Specifies the output file name for the annotated CAS JSON. Defaults to <code class="docutils literal notranslate"><span class="pre">output.json</span></code>.</p></li>
</ul>
</section>
<section id="usage-examples">
<h3>Usage Examples:<a class="headerlink" href="#usage-examples" title="Link to this heading"></a></h3>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cd src
python -m cas add_author_annotations --cas_json path_to_cas.json --csv path_to_csv --join_on CrossArea_cluster --columns random_annotation_x random_annotation_y --output annotated_output.json
python -m cas add_author_annotations --cas_json path_to_cas.json --csv path_to_csv --join_on_cell_set_id --output annotated_output.json
python -m cas add_author_annotations --cas_json path_to_cas.json --csv path_to_csv --join_on_labelset_label --output annotated_output.json
</pre></div>
</div>
</section>
</section>
<section id="split-cas-json-by-cell-label">
<h2>Split CAS JSON by Cell Label<a class="headerlink" href="#split-cas-json-by-cell-label" title="Link to this heading"></a></h2>
<p>This tool allows you to split a CAS JSON file based on specified cell accession_id(s). It supports creating multiple output files, each corresponding to one of the specified accession_id(s), or a single output file containing all specified accession_id, depending on the user’s choice.</p>
<section id="id1">
<h3>Command-line Arguments:<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>–cas_json</strong>: Path to the CAS JSON file that will be updated. This parameter is required.</p></li>
<li><p><strong>–split_on</strong>: Specifies the cell accession_id(s) to split the CAS file. Multiple accession_ids can be provided.</p></li>
<li><p><strong>–multiple_outputs</strong>: If set, creates multiple output files for each label provided in <code class="docutils literal notranslate"><span class="pre">--split_on</span></code>. If not set, creates a single output file containing all child terms from the split.</p></li>
</ul>
</section>
<section id="id2">
<h3>Usage Examples:<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cd src
python -m cas split_cas --cas_json path/to/cas.json --split_on term1
python -m cas split_cas --cas_json path/to/cas.json --split_on term1 term2
python -m cas split_cas --cas_json path/to/cas.json --split_on term1 term2 --multiple_outputs
</pre></div>
</div>
<p>python -m cas split_cas –cas_json path/to/cas.json –split_on term1 term2 –multiple_outputs</p>
</section>
</section>
<section id="split-anndata-with-cas-json">
<h2>Split AnnData with CAS JSON<a class="headerlink" href="#split-anndata-with-cas-json" title="Link to this heading"></a></h2>
<p>This tool allows you to split an AnnData file based on specified CAS JSON files. It supports creating multiple output files, each corresponding to one of the specified CAS JSON files, or a single output file that contains all cells from the input CAS JSON files, depending on the user’s choice.</p>
<section id="id3">
<h3>Command-line Arguments:<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>–anndata</strong>: Path to the AnnData file. This parameter is required.</p></li>
<li><p><strong>–cas_json</strong>: List of CAS JSON file paths that will be used to split the AnnData file. Multiple paths can be provided.</p></li>
<li><p><strong>–multiple_outputs</strong>: If set, creates multiple output files for each CAS JSON file; if not set, creates a single output file containing all cells from the input CAS JSON files.</p></li>
<li><p><strong>–compression</strong>: Compression method utilized in anndata write function. It can be <code class="docutils literal notranslate"><span class="pre">gzip</span></code>, <code class="docutils literal notranslate"><span class="pre">lzf</span></code>,  or <code class="docutils literal notranslate"><span class="pre">None</span></code>. Default is “gzip” if flag is provided without a value. If the flag is not provided, defaults to None.</p></li>
</ul>
</section>
<section id="id4">
<h3>Usage Examples:<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>cd src
python -m cas split_anndata --anndata path/to/anndata.h5ad --cas_json path/to/cas.json
python -m cas split_anndata --anndata path/to/anndata.h5ad --cas_json path/to/cas_1.json path/to/cas_2.json --compression lzf
python -m cas split_anndata --anndata path/to/anndata.h5ad --cas_json path/to/cas_1.json path/to/cas_2.json 
--multiple_outputs --compression
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="CAS Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="source/index.html" class="btn btn-neutral float-right" title="cas-tools’s documentation!" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Huseyin Kir, Ugur Bayindir.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>